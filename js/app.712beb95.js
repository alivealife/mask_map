(function(t){function e(e){for(var o,a,i=e[0],c=e[1],u=e[2],p=0,d=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(d.length)d.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],o=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(o=!1)}o&&(n.splice(e--,1),t=a(a.s=r[0]))}return t}var o={},s={app:0},n=[];function a(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=o,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(r,o,function(e){return t[e]}.bind(null,o));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/mask_map/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"1be1":function(t,e,r){t.exports=r.p+"img/pin.799a7977.svg"},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),s=r("bc3a"),n=r.n(s),a=r("a7fe"),i=r.n(a),c=r("9062"),u=r.n(c),l=r("e11e"),p=(r("6cc5"),r("e40d"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-3 height-set"},[r("MaskMap",{staticClass:"w-100"})],1),r("div",{staticClass:"col-md-9 height-set"},[r("MapView",{staticClass:"h-100 w-100"})],1)])],1)}),d=[],f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"p-4 bg-select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.currentCounty,expression:"currentCounty"}],staticClass:"custom-select custom-select mb-3",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentCounty=e.target.multiple?r:r[0]}}},t._l(t.selectBarCounty,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})),0),r("select",{directives:[{name:"model",rawName:"v-model",value:t.currentTown,expression:"currentTown"}],staticClass:"custom-select custom-select",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentTown=e.target.multiple?r:r[0]}}},t._l(t.selectBarTown,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})),0),r("h3",{staticClass:"context-size mt-3"},[t._v(" 有取得口罩數量的藥局有 "),r("span",{staticClass:"qty-set"},[t._v(t._s(t.showData.length))]),t._v(" 家 ")])]),t._l(t.showData,(function(e){return r("section",{key:e.properties.id,staticClass:"p-3 border pointer",on:{click:function(r){return t.getStoreLocation(e)}}},[r("div",{staticClass:"container"},[r("p",{staticClass:"name-size"},[t._v(t._s(e.properties.name))]),r("p",{staticClass:"info-color"},[r("i",{staticClass:"icon_set",style:{backgroundImage:"url("+t.bg_address+")"}}),t._v(" "+t._s(e.properties.address)+" ")]),r("p",{staticClass:"info-color"},[r("i",{staticClass:"icon_set",style:{backgroundImage:"url("+t.bg_phone+")"}}),t._v(" "+t._s(e.properties.phone)+" ")]),r("div",{staticClass:"qty-box text-center justify-content-center btn-size"},[e.properties.mask_adult>0?r("div",{staticClass:"box-width rounded-left text-set border-right border-white",class:{"mask-yes":e.properties.mask_adult>0}},[t._v("成人："+t._s(e.properties.mask_adult))]):r("div",{staticClass:"box-width rounded-left text-set border-right border-white"},[t._v(" 成人： 已售完")]),e.properties.mask_child>0?r("div",{staticClass:"box-width rounded-right text-set",class:{"mask-yes":e.properties.mask_child>0}},[t._v("兒童："+t._s(e.properties.mask_child))]):r("div",{staticClass:"box-width rounded-right text-set"},[t._v("兒童：已售完")])])])])}))],2)},m=[],h=r("1be1"),v=r.n(h),g=r("cf63"),_=r.n(g),b={name:"MaskMap",data:function(){return{bg_address:v.a,bg_phone:_.a}},methods:{getStoreList:function(){this.$store.dispatch("getStore")},getStoreLocation:function(t){this.$store.dispatch("getStoreLocation",t)}},computed:{storeList:function(){return this.$store.state.storeList},selectBarCounty:function(){return this.$store.state.selectBarCounty},selectBarTown:function(){return this.$store.state.selectBarTown},currentCounty:{get:function(){return this.$store.state.currentCounty},set:function(t){this.$store.commit("UPDATECOUNTY",t)}},currentTown:{get:function(){return this.$store.state.currentTown},set:function(t){this.$store.commit("UPDATETOWN",t)}},showData:function(){return this.$store.dispatch("filterCounty"),this.$store.state.showData}},mounted:function(){this.getStoreList()}},y=b,w=r("2877"),C=Object(w["a"])(y,f,m,!1,null,null,null),T=C.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("l-map",{attrs:{zoom:t.zoom,center:t.center}},[r("l-tile-layer",{attrs:{url:t.url}}),r("v-marker-cluster",t._l(t.storeList,(function(e){return r("l-marker",{key:e.properties.id,attrs:{"lat-lng":[e.geometry.coordinates[1],e.geometry.coordinates[0]]}},[r("l-popup",[r("p",{staticClass:"name-size"},[t._v(t._s(e.properties.name))]),r("p",{staticClass:"info-color context-size"},[r("i",{staticClass:"icon_set",style:{backgroundImage:"url("+t.bg_address+")"}}),t._v(" "+t._s(e.properties.address)+" ")]),r("p",{staticClass:"info-color context-size"},[r("i",{staticClass:"icon_set",style:{backgroundImage:"url("+t.bg_phone+")"}}),t._v(" "+t._s(e.properties.phone)+" ")]),r("div",{staticClass:"qty-box text-center justify-content-center btn-size"},[e.properties.mask_adult>0?r("div",{staticClass:"box-width rounded-left text-set border-right border-white",class:{"mask-yes":e.properties.mask_adult>0}},[t._v("成人："+t._s(e.properties.mask_adult))]):r("div",{staticClass:"box-width rounded-left text-set border-right border-white"},[t._v(" 成人： 已售完")]),e.properties.mask_child>0?r("div",{staticClass:"box-width rounded-right text-set",class:{"mask-yes":e.properties.mask_child>0}},[t._v("兒童："+t._s(e.properties.mask_child))]):r("div",{staticClass:"box-width rounded-right text-set"},[t._v("兒童：已售完")])])])],1)})),1)],1)],1)},k=[],x=r("2699"),O=r("a40a"),S=r("4e2b"),E=r("f60f"),A=r("ca9f"),D=r.n(A),M={name:"MyAwesomeMap",components:{LMap:x["a"],LTileLayer:O["a"],LMarker:S["a"],LPopup:E["a"],"v-marker-cluster":D.a},data:function(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",bg_address:v.a,bg_phone:_.a}},computed:{storeList:function(){return this.$store.state.storeList},center:function(){return this.$store.state.center},zoom:function(){return this.$store.state.zoom}}},$=M,N=Object(w["a"])($,L,k,!1,null,null,null),P=N.exports,j={name:"App",components:{MaskMap:T,MapView:P},computed:{isLoading:function(){return this.$store.state.isLoading}}},B=j,I=(r("5c0b"),Object(w["a"])(B,p,d,!1,null,null,null)),z=I.exports,R=(r("4989"),r("4de4"),r("4160"),r("a630"),r("caad"),r("d3b7"),r("6062"),r("2532"),r("3ca3"),r("159b"),r("ddb0"),r("2f62"));o["a"].use(R["a"]);var U=new R["a"].Store({state:{isLoading:!1,storeList:[],tempStore:{},filterData:[],showData:[],selectBarCounty:[],selectBarTown:[],currentCounty:"臺北市",currentTown:"松山區",center:[25.0482531,121.5107414],zoom:20},mutations:{LOADING:function(t,e){t.isLoading=e},STORELIST:function(t,e){t.storeList=e},SELECTBARCOUNTY:function(t,e){t.selectBarCounty=e},SELECTBARTOWN:function(t,e){t.selectBarTown=e},UPDATECOUNTY:function(t,e){t.currentCounty=e},UPDATETOWN:function(t,e){t.currentTown=e},FILTERDATA:function(t,e){t.filterData=e},SHOWDATA:function(t,e){t.showData=e},TEMPSTORE:function(t,e){t.tempStore=e},CENTER:function(t,e){t.center=e},ZOOM:function(t,e){t.zoom=e}},actions:{getStore:function(t){t.commit("LOADING",!0);var e="https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json";n.a.get(e).then((function(e){t.commit("STORELIST",e.data.features),t.dispatch("getList")}))},getList:function(t){t.commit("LOADING",!0);var e=new Set;t.state.storeList.forEach((function(t){""!==t.properties.county&&e.add(t.properties.county)})),t.commit("SELECTBARCOUNTY",Array.from(e))},filterCounty:function(t){t.commit("FILTERDATA",t.state.storeList.filter((function(e){return e.properties.county===t.state.currentCounty}))),t.dispatch("setTownList"),t.commit("SHOWDATA",t.state.storeList.filter((function(e){return e.properties.county===t.state.currentCounty&&e.properties.town===t.state.currentTown})))},setTownList:function(t){var e=new Set;t.state.filterData.forEach((function(t){e.add(t.properties.town)})),t.commit("SELECTBARTOWN",Array.from(e)),t.state.selectBarTown.includes(t.state.currentTown)||t.commit("UPDATETOWN",t.state.selectBarTown[0]),t.commit("LOADING",!1)},getStoreLocation:function(t,e){t.commit("TEMPSTORE",e),t.state.tempStore&&(t.commit("CENTER",[t.state.tempStore.geometry.coordinates[1],t.state.tempStore.geometry.coordinates[0]]),t.commit("ZOOM",20))}}});o["a"].use(i.a,n.a),o["a"].component("Loading",u.a),delete l["Icon"].Default.prototype._getIconUrl,l["Icon"].Default.mergeOptions({iconRetinaUrl:r("a727"),iconUrl:r("a727"),shadowUrl:r("e2b9")}),o["a"].config.productionTip=!1,new o["a"]({store:U,render:function(t){return t(z)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var o=r("9c0c"),s=r.n(o);s.a},"9c0c":function(t,e,r){},a727:function(t,e,r){t.exports=r.p+"img/mark.77be2b02.svg"},cf63:function(t,e,r){t.exports=r.p+"img/phone.ed1dfd6b.svg"}});
//# sourceMappingURL=app.712beb95.js.map